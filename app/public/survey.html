<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8" />
    <title>Friend Finder</title>    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@700&family=Modak&family=Notable&display=swap" rel="stylesheet">

</head>

  <div class="container">

    <h1 style="font-family: 'Libre Baskerville', serif;"><u>Survey Questions</u></h2>
    <hr>

    <h3><strong>About You</strong></h3>
    <h4 style="font-family: 'Libre Baskerville', serif;">Name (Required)</h4>
    <input type="text" id="name" class="form-control" required>

    <h4 style="font-family: 'Libre Baskerville', serif;">Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required>

    <hr>

    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 1</h3>
      <h4>You love music and have it playing everywhere you go.</h5>
      <select id="question1">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 2</h3>
      <h4>You are far more inclined to stay at home and watch tv or read a book than go on an adventure.</h5>
      <select id="question2">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 3</h3>
      <h4>You fancy yourself philospher and like to discuss deep theoretical topics.</h5>
      <select id="question3">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 4</h3>
      <h4>You are extremely spontaneous and are willing to go anywhere at the drop of dime.</h5>
      <select id="question4">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 5</h3>
      <h4>People can really tick you off, especially the general pubic.</h5>
      <select id="question5">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 6</h3>
      <h4>It is not uncommon for you to be moved watching a movie or cry during a difficult scene.</h5>
      <select id="question6">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 7</h3>
      <h4>In a discussion, truth should be more important than peopleâ€™s sensitivities.</h5>
      <select id="question7">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 8</h3>
      <h4>You set goals and stop at nothing to achieve those goals.</h5>
      <select id="question8">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 9</h3>
      <h4>Working out and physical exercise are a very a very important part of your  day.</h5>
      <select id="question9">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <div class="input-field col s12">
      <h4 style="font-family: 'Notable', sans-serif;">Question 10</h3>
      <h4>Breaking Bad and Better Call Saul are two of the best shows on television.</h5>
      <select id="question10">
        <option value="" disabled selected>Choose your option</option>
        <option value="1">1 (Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5 (Strongly Agree)</option>
      </select>
    </div>
    <br>
    <br>

    <!-- Submit Button -->
    <a id="submitButtonId" class="btn-lg btn-block btn-primary text-white text-center">Submit</a>
    <!-- <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
     Submit</button> -->

    <hr>
    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/jaswhitehead/FriendFinder">GitHub Repo</a> | <a href="/">Home</a></p>
      </div>
    </footer>
  </div>

  <!-- Results Modal -->
  <div class="modal" id="myModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <!-- Modal content-->
      <div class="modal-content">
          <div class="modal-footer">
            <h5 class="modal-title">Meet your new best friend!</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
      </div>
      <div class="modal-body">
          <p id="modalTxt"></p>
        <div>
          <img id="imageId" style="width: 140px; height: 140px;">
        </div>
      </div>
    </div>
  </div>

<!--Start script for matching function-->

<script type="text/javascript">
$("#submitButtonId").click(function () {
            event.preventDefault();
            var scoresArr = [];
            for (var i = 1; i < 11; i++) {
                scoresArr.push(parseInt($("#Q" + i).val().trim()));
            }
            var newSubmission = {
                name: $("#nameinputId").val().trim(),
                scores: scoresArr,
                image: $("#imageinputId").val().trim()
            }
            var currFriendsScores = [];
            var currFriendsNames = [];
            var currFriendsImages = [];
            // API GET Requests 
            $.get("/api/friends", function (data) {
                for (var i = 0; i < data.length; i++) {
                    currFriendsScores.push(data[i].scores);
                    currFriendsNames.push(data[i].name);
                    currFriendsImages.push(data[i].image);
                }
            })
            // API POST Requests 
            $.post("/api/friends", newSubmission, function (data) {
                var diffArray = [];
                for (var i = 0; i < currFriendsScores.length; i++) {
                    var diff = 0;
                    for (var k = 0; k < currFriendsScores[i].length; k++) {
                        diff += Math.abs(currFriendsScores[i][k] - data.scores[k]);
                    }
                    diffArray.push(diff);
                }
                var smallestDifferenceIn = diffArray.indexOf(Math.min(...diffArray));
                var match = currFriendsNames[smallestDifferenceIn];
                var image = currFriendsImages[smallestDifferenceIn];
                $("#myModal").modal("toggle");
                $("#modalTxt").text("Your Match is: " + match);
                $("#imageId").attr("src", image);
            });
            $("#nameinputId").val("");
            for (var i = 1; i < 11; i++) {
                $("#Q" + i).val("");
            }
        })
    </script>
</body>

</html>